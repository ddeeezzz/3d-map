# 必读：代码文件管理规范

本文档规定了项目代码文件的创建与修改原则，确保工作流清晰、避免冲突。

---

## 协作者个人文档管理

**重要建议**：每位协作者应在 `spec/` 下建立个人文件夹（已建立），记录自己的修改与新增内容，便于后期汇总与生成报告。

### 文件夹结构

```
 wrx/                  # 协作者 wrx 的工作记录
├── 修改日志.md        # 修改日志
└── 模块功能1.md           # 新增模块文档
└── 模块功能2.md  
└── 模块xxxx.md  
qz/                    # 协作者 qz 的工作记录
├── 修改日志.md        # 修改日志
└── 模块功能1.md           # 新增模块文档
└── 模块功能图2.md  
└── 模块xxxx.md    
```

### 文件夹内容建议

| 文件 | 用途 |
|------|------|
| `修改日志.md` | 记录本人所有修改与新增的代码文件、功能说明、关键实现细节 | 
| `模块x.md` | 新增功能对应的详细设计文档（可选，若功能复杂） |

### 后期用途

- **代码汇总**：AI 可逐一读取各协作者文件夹，生成统一的实现报告
- **冲突管理**：明确分工，降低合并冲突风险
- **知识沉淀**：每位协作者的工作记录独立保存

**注意**：即便新增内容与 `spec/` 根目录文档功能重合，也**不要修改根目录文档**，在个人文件夹中独立编写即可。

---

## 核心原则

### 1. 优先新增，谨慎修改

- **尽量新增文件**，而不是修改原有代码
- 避免对既有模块进行大幅重构
- 通过模块化设计实现功能扩展

### 2. 已知改动点

以下文件**必定会被修改**，后期需手动合并：

- `app/src/App.jsx`：主应用组件

可能还有改动其他文件的需求，如有，后期也需手动合并

**合并说明**：上述文件的改动在合并阶段由qy手动处理，避免自动覆盖导致冲突。

---

## 参考资源

### 项目结构

详见 [`spec/app-structure.md`](spec/app-structure.md)，其中包含：

- `app/src/` 各子目录的详细说明
- 模块职责分工
- 文件组织规范

### 地理数据

校园地理数据位置：

```
app/src/data/campus.geojson
```

**说明**：
- 格式：GeoJSON
- 来源：先使用 `osmtogeojson` 将 `map.osm` 转换为 `data/tmp.json`，再由 `tools/clean-geojson.js` 清洗落地 `app/src/data/campus.geojson`
- 包含建筑、道路、水体等地理要素及其属性
- 如果有需求，比如现在的数据太乱，想要得到更加清晰的数据，建议建立新的数据清洗文件，例如tools/clean-daohang-geojson.js，clean-daohang-geojson.js，得到第n个新的geojson。流程参考spec\data-pipeline.md

---

## 代码文件创建规范

### 新增文件位置

新增代码文件应放在`app/src/`下的某个文件夹内，也可建立新的文件夹。可以复制app-structure项目结构说明给ai让ai规划

# 快速入门指南

欢迎加入西南交通大学犀浦校区校园导航项目！本文档将帮助你快速启动项目并开始开发。

## 前置要求

- **Node.js**：v16 及以上版本
- **pnpm**：包管理工具
- **Git**：版本控制（可选，但推荐）

### 安装 Node.js

#### Windows 用户

1. 访问 [Node.js 官网](https://nodejs.org/) 下载 LTS 版本
2. 下载后双击安装，按默认选项一路点击 "Next" 即可
3. 安装完成后，打开 PowerShell 验证：

```powershell
node --version
npm --version
```

应该显示类似输出：

```bash
v20.x.x
10.x.x
```

### 安装 pnpm

Node.js 安装完成后，使用 npm 全局安装 pnpm：

```bash
npm install -g pnpm
```

验证安装成功：

```bash
pnpm --version
```

应该显示版本号，例如 `v9.x.x`。

---

## 快速启动（3 步）

### 1. 安装依赖

进入项目目录的 `app` 文件夹：

```bash
cd app
pnpm install
```

首次运行会下载并安装所有依赖包，耗时 1-3 分钟，请耐心等待。

### 2. 启动开发服务器

运行以下命令启动开发服务器：

```bash
pnpm run dev
```

你会看到类似输出：

```bash
  ➜  Local:   http://localhost:5173/
  ➜  press h to show help
```

### 3. 打开浏览器

在浏览器中访问：

```bash
http://localhost:5173/
```

你应该能看到西南交通大学犀浦校区的三维校园地图。

---

## 常用命令

项目在 `app/` 文件夹下提供以下命令：

| 命令 | 作用 |
|------|------|
| `pnpm run dev` | 启动开发服务器（支持热更新） |
| `pnpm run build` | 构建生产版本 |
| `pnpm run lint` | 代码风格检查 |
| `pnpm run test` | 运行单元测试 |
| `pnpm run preview` | 预览生产版本 |

### 举例：运行测试

```bash
# 在 app 文件夹下
pnpm run test
```

## 项目结构

核心源代码位于 `app/src/` 下：

```bash
app/src/
├── main.jsx              # 应用入口
├── App.jsx               # 主应用组件
├── components/           # React 组件（导航面板、UI 卡片等）
├── three/                # Three.js 3D 场景与交互
├── deck/                 # deck.gl 图层配置
├── views/                # 页面视图组件
├── store/                # Zustand 状态管理
├── config/               # 应用配置文件
├── logger/               # 日志模块
├── lib/                  # 工具函数
├── tests/                # 单元测试
└── data/                 # GeoJSON 地理数据
```

详细说明请参考 [`spec/app-structure.md`](spec/app-structure.md)。

## 技术栈

项目采用现代 Web 开发技术栈：

- **前端框架**：React 19 + Vite
- **包管理**：pnpm
- **三维渲染**：Three.js + deck.gl
- **状态管理**：Zustand
- **测试框架**：Vitest
- **代码检查**：ESLint

## 常见问题

### 端口 5173 已被占用

如果端口被占用，Vite 会自动使用下一个可用端口（如 5174）。或者手动指定端口：

```bash
pnpm run dev -- --port 3000
```

### 依赖安装失败

确保网络连接正常，或尝试清理缓存后重新安装：

```bash
pnpm store prune
pnpm install
```

### 修改代码后页面不更新

开发模式支持热更新（HMR）。如果不起作用，刷新浏览器或重启开发服务器。

## 规范与文档

项目遵循统一的规范，请阅读以下关键文档：

1. **编码规范**：[`AGENTS.md`](AGENTS.md) 中的"注释规范"和"日志规范"
2. **项目结构**：[`spec/app-structure.md`](spec/app-structure.md)
3. **配置管理**：[`spec/config.md`](spec/config.md)
4. **日志使用**：[`spec/logging.md`](spec/logging.md)

## 获取帮助

- 查看 [`spec/`](spec/) 目录下的详细文档
- 查看 [`app/src/`](app/src/) 下各模块的 `README.md（目前比较简略）`
